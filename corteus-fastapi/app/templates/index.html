<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Corteus - Gestor de Cortes</title>
    <link rel="icon" href="{{ url_for('static', path='images/IconeLogo.png') }}" type="image/png">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YC1RN8SNL1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-YC1RN8SNL1');
    </script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'inter': ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'corteus': {
                            'primary': '#ff4b4b',
                            'secondary': '#ff7b00',
                            'dark': '#18191a',
                            'gray': '#23272f',
                            'light': '#f8fafc'
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-900 text-white font-inter min-h-screen">
    <!-- Navigation -->
    <nav class="bg-corteus-gray border-b border-gray-700">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-center h-16">
                <div class="text-sm text-gray-400">
                    v2.0.0 | Desenvolvido por Matheus Araújo
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <div class="bg-gradient-to-br from-corteus-primary via-corteus-secondary to-orange-600">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center">
            <div class="flex flex-col items-center justify-center">
                <div class="bg-white/10 backdrop-blur-sm rounded-full p-6 mb-6">
                    <img src="data:image/png;base64,{{ logo_base64 }}" alt="Logo Corteus" class="h-20 w-20">
                </div>
                <h1 class="text-5xl md:text-6xl font-bold text-white mb-4 tracking-tight">Corteus</h1>
                <p class="text-xl md:text-2xl text-white/90 font-light max-w-2xl">Sistema Inteligente de Otimização de Cortes</p>
                <div class="mt-6 flex items-center space-x-2 text-white/70">
                    <i class="fas fa-tools"></i>
                    <span class="text-sm">Desenvolvido para Manufatura Avançada</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <form id="corteus-form" class="space-y-10">
            <!-- 1. Dados do Projeto -->
            <div class="bg-gradient-to-br from-corteus-gray to-gray-800 rounded-2xl p-8 shadow-2xl border border-gray-700/50">
                <div class="flex items-center mb-8">
                    <div class="bg-corteus-primary/20 p-3 rounded-xl mr-4">
                        <i class="fas fa-folder-open text-2xl text-corteus-primary"></i>
                    </div>
                    <div>
                        <h2 class="text-3xl font-bold text-white">Dados do Projeto</h2>
                        <p class="text-gray-400 mt-1">Informações básicas do projeto</p>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                    <div class="space-y-2">
                        <label for="projeto" class="block text-sm font-semibold text-gray-300">Projeto</label>
                        <select id="projeto" name="projeto" class="w-full bg-gray-900/80 border border-gray-600 rounded-xl px-4 py-4 text-white focus:ring-2 focus:ring-corteus-primary focus:border-corteus-primary transition-all backdrop-blur-sm">
                            {% for projeto in projetos %}
                            <option value="{{ projeto }}">{{ projeto }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="space-y-2">
                        <label for="ss" class="block text-sm font-semibold text-gray-300">SS</label>
                        <input type="text" id="ss" name="ss" maxlength="9" placeholder="0123/2024" 
                               class="w-full bg-gray-900/80 border border-gray-600 rounded-xl px-4 py-4 text-white placeholder-gray-500 focus:ring-2 focus:ring-corteus-primary focus:border-corteus-primary transition-all backdrop-blur-sm">
                        <div id="ss-error" class="text-red-400 text-sm mt-2 hidden"></div>
                    </div>
                    <div class="space-y-2">
                        <label for="sk" class="block text-sm font-semibold text-gray-300">SK</label>
                        <input type="text" id="sk" name="sk" maxlength="7" placeholder="EST-001 ou TU-001" 
                               class="w-full bg-gray-900/80 border border-gray-600 rounded-xl px-4 py-4 text-white placeholder-gray-500 focus:ring-2 focus:ring-corteus-primary focus:border-corteus-primary transition-all backdrop-blur-sm">
                        <div id="sk-error" class="text-red-400 text-sm mt-2 hidden"></div>
                    </div>
                    <div class="space-y-2">
                        <label for="cod_material" class="block text-sm font-semibold text-gray-300">Código do Material</label>
                        <input type="text" id="cod_material" name="cod_material" maxlength="10" placeholder="1234567890" 
                               class="w-full bg-gray-900/80 border border-gray-600 rounded-xl px-4 py-4 text-white placeholder-gray-500 focus:ring-2 focus:ring-corteus-primary focus:border-corteus-primary transition-all backdrop-blur-sm">
                        <div id="cod-error" class="text-red-400 text-sm mt-2 hidden"></div>
                    </div>
                </div>
            </div>

            <!-- 2. Parâmetros de Corte -->
            <div class="bg-gradient-to-br from-corteus-gray to-gray-800 rounded-2xl p-8 shadow-2xl border border-gray-700/50">
                <div class="flex items-center mb-8">
                    <div class="bg-corteus-secondary/20 p-3 rounded-xl mr-4">
                        <i class="fas fa-cogs text-2xl text-corteus-secondary"></i>
                    </div>
                    <div>
                        <h2 class="text-3xl font-bold text-white">Parâmetros de Corte</h2>
                        <p class="text-gray-400 mt-1">Configure o modo de operação</p>
                    </div>
                </div>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="space-y-4">
                        <label class="block text-lg font-semibold text-gray-300">Modo de Operação</label>
                        <div class="space-y-4">
                            <label class="flex items-center p-5 bg-gray-900/50 rounded-xl cursor-pointer hover:bg-gray-800/50 transition-all border border-gray-700/50 hover:border-corteus-primary/50">
                                <input type="radio" name="modo" value="Automático" checked class="text-corteus-primary focus:ring-corteus-primary w-5 h-5">
                                <div class="ml-4">
                                    <div class="text-white font-semibold text-lg">Automático</div>
                                    <div class="text-gray-400">Sistema calcula automaticamente</div>
                                </div>
                            </label>
                            <label class="flex items-center p-5 bg-gray-900/50 rounded-xl cursor-pointer hover:bg-gray-800/50 transition-all border border-gray-700/50 hover:border-corteus-primary/50">
                                <input type="radio" name="modo" value="Manual" class="text-corteus-primary focus:ring-corteus-primary w-5 h-5">
                                <div class="ml-4">
                                    <div class="text-white font-semibold text-lg">Manual</div>
                                    <div class="text-gray-400">Você informa as barras disponíveis</div>
                                </div>
                            </label>
                        </div>
                    </div>
                    <div class="flex items-center" id="emenda-container">
                        <label class="flex items-center p-6 bg-gray-900/50 rounded-xl w-full border border-gray-700/50 hover:border-corteus-primary/50 transition-all">
                            <input type="checkbox" id="sugestao_emenda" checked class="text-corteus-primary focus:ring-corteus-primary w-5 h-5">
                            <div class="ml-4">
                                <div class="text-white font-semibold text-lg">Sugestão de Emenda</div>
                                <div class="text-gray-400">Apenas para modo manual</div>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Modo Automático -->
                <div id="modo-automatico" class="mt-8 p-6 bg-gray-900/30 rounded-xl border border-gray-700/30">
                    <label for="comprimento_barra" class="block text-lg font-semibold text-gray-300 mb-4">Comprimento da barra (mm)</label>
                    <input type="number" id="comprimento_barra" value="6000" min="100" max="12000"
                           class="w-full md:w-1/2 bg-gray-900/80 border border-gray-600 rounded-xl px-4 py-4 text-white focus:ring-2 focus:ring-corteus-primary focus:border-corteus-primary transition-all backdrop-blur-sm text-lg">
                </div>

                <!-- Modo Manual -->
                <div id="modo-manual" class="mt-8 p-6 bg-gray-900/30 rounded-xl border border-gray-700/30 hidden">
                    <label for="barras_disponiveis" class="block text-lg font-semibold text-gray-300 mb-4">Barras disponíveis (mm, separadas por vírgula, espaço ou quebra de linha)</label>
                    <textarea id="barras_disponiveis" rows="4" placeholder="6000, 5800, 4000&#10;3500 2800&#10;5000"
                              class="w-full bg-gray-900/80 border border-gray-600 rounded-xl px-4 py-4 text-white placeholder-gray-500 focus:ring-2 focus:ring-corteus-primary focus:border-corteus-primary transition-all backdrop-blur-sm text-lg"></textarea>
                    <div id="barras-error" class="text-red-400 text-sm mt-2 hidden"></div>
                </div>
            </div>

            <!-- 3. Entradas de Cortes -->
            <div class="bg-gradient-to-br from-corteus-gray to-gray-800 rounded-2xl p-8 shadow-2xl border border-gray-700/50">
                <div class="flex items-center mb-8">
                    <div class="bg-blue-500/20 p-3 rounded-xl mr-4">
                        <i class="fas fa-cut text-2xl text-blue-400"></i>
                    </div>
                    <div>
                        <h2 class="text-3xl font-bold text-white">Entradas de Cortes</h2>
                        <p class="text-gray-400 mt-1">Defina os cortes desejados</p>
                    </div>
                </div>
                <div class="space-y-4">
                    <label for="cortes_desejados" class="block text-lg font-semibold text-gray-300">Cortes desejados (mm, separados por vírgula, espaço ou quebra de linha)</label>
                    <textarea id="cortes_desejados" rows="5" placeholder="1500, 2000, 3000&#10;1200 800&#10;2500"
                              class="w-full bg-gray-900/80 border border-gray-600 rounded-xl px-4 py-4 text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-400 focus:border-blue-400 transition-all backdrop-blur-sm text-lg"></textarea>
                    <div id="cortes-error" class="text-red-400 text-sm mt-2 hidden"></div>
                </div>
            </div>

            <!-- 4. Relatórios -->
            <div class="grid grid-cols-1 xl:grid-cols-2 gap-8">
                <!-- Relatório de Corte -->
                <div class="bg-gradient-to-br from-corteus-gray to-gray-800 rounded-2xl p-8 shadow-2xl border border-gray-700/50">
                    <div class="flex items-center mb-8">
                        <div class="bg-green-500/20 p-3 rounded-xl mr-4">
                            <i class="fas fa-file-alt text-2xl text-green-400"></i>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-white">Relatório de Corte</h2>
                            <p class="text-gray-400 mt-1">Otimização completa</p>
                        </div>
                    </div>
                    <button type="button" id="gerar-corte" class="w-full bg-gradient-to-r from-corteus-primary to-corteus-secondary hover:from-corteus-secondary hover:to-corteus-primary text-white font-bold py-5 px-8 rounded-xl transition-all transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-corteus-primary focus:ring-offset-2 focus:ring-offset-gray-900 shadow-lg text-lg">
                        <i class="fas fa-calculator mr-3"></i>
                        Gerar Relatório de Corte
                    </button>
                    <div id="resultado-corte" class="mt-6 hidden"></div>
                </div>

                <!-- Relatório de Minuta -->
                <div class="bg-gradient-to-br from-corteus-gray to-gray-800 rounded-2xl p-8 shadow-2xl border border-gray-700/50">
                    <div class="flex items-center mb-8">
                        <div class="bg-purple-500/20 p-3 rounded-xl mr-4">
                            <i class="fas fa-file-invoice text-2xl text-purple-400"></i>
                        </div>
                        <div>
                            <h2 class="text-2xl font-bold text-white">Relatório de Minuta</h2>
                            <p class="text-gray-400 mt-1">Comparação rápida</p>
                        </div>
                    </div>
                    <button type="button" id="gerar-minuta" class="w-full bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-600 text-white font-bold py-5 px-8 rounded-xl transition-all transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-gray-900 shadow-lg text-lg">
                        <i class="fas fa-receipt mr-3"></i>
                        Gerar Relatório de Minuta
                    </button>
                    <div id="resultado-minuta" class="mt-6 hidden"></div>
                </div>
            </div>
        </form>
    </div>

    <!-- Tutorial Modal -->
    <div id="tutorial-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-corteus-gray rounded-lg p-6 max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-2xl font-bold text-corteus-primary">Como usar o Corteus</h3>
                    <button id="close-tutorial" class="text-gray-400 hover:text-white text-2xl">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="space-y-6 text-gray-300">
                    <div>
                        <h4 class="text-lg font-semibold text-white mb-2">1. Preencha os dados do projeto</h4>
                        <p>Escolha o projeto, digite o número da SS (formato: 0123/2024), o SK (formato: EST-001) e o código do material (10 dígitos).</p>
                    </div>
                    <div>
                        <h4 class="text-lg font-semibold text-white mb-2">2. Escolha o modo de operação</h4>
                        <p><strong>Automático:</strong> Informe apenas o comprimento padrão da barra. O sistema calcula automaticamente.<br>
                        <strong>Manual:</strong> Informe o comprimento de cada barra disponível no estoque.</p>
                    </div>
                    <div>
                        <h4 class="text-lg font-semibold text-white mb-2">3. Informe os cortes desejados</h4>
                        <p>Digite os tamanhos das peças separados por vírgula (exemplo: 1500, 2000, 3000).</p>
                    </div>
                    <div>
                        <h4 class="text-lg font-semibold text-white mb-2">4. Gere os relatórios</h4>
                        <p><strong>Relatório de Corte:</strong> Otimização completa baseada nos parâmetros.<br>
                        <strong>Relatório de Minuta:</strong> Comparação usando barras comerciais de 6m (não funciona com cortes > 6000mm).</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Help Button -->
    <button id="help-button" class="fixed bottom-8 right-8 bg-gradient-to-r from-corteus-primary to-corteus-secondary hover:from-corteus-secondary hover:to-corteus-primary text-white p-5 rounded-full shadow-2xl transition-all transform hover:scale-110 z-40 border border-white/20">
        <i class="fas fa-question text-2xl"></i>
    </button>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="fixed inset-0 bg-black/80 backdrop-blur-sm hidden z-50 flex items-center justify-center">
        <div class="bg-gradient-to-br from-corteus-gray to-gray-800 rounded-2xl p-10 flex flex-col items-center border border-gray-700/50 shadow-2xl">
            <div class="animate-spin rounded-full h-20 w-20 border-4 border-gray-600 border-t-corteus-primary mb-6"></div>
            <p class="text-white text-xl font-semibold" id="loading-text">Processando...</p>
            <p class="text-gray-400 text-sm mt-2">Aguarde enquanto geramos seu relatório</p>
        </div>
    </div>

    <script src="/static/js/app.js"></script>
</body>
</html>
